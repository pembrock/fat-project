{% include 'top.html' %}
<div class="welcome">
    <p>Регистрация объекта</p>
</div>

<div class="parent">
    <div class="block">
    <div class="right regForm">
        <label>Вид объекта</label>
        <div class="field">
            <input type="radio" name="type" value="1" id="autoserv">
            <label for="autoserv" class="radio">Автосервис</label>
        </div>
        <div class="field">
            <input type="radio" name="type" value="2" id="market">
            <label for="market" class="radio">Магазин</label>
        </div>
        <div class="field">
            <input type="radio" name="type" value="3" id="all">
            <label for="all" class="radio">Все</label>
        </div>
        <label>Марки авто</label>
        <div class="field">
            <input type="radio" name="typeAuto" value="1" id="sng">
            <label for="sng" class="radio">СНГ</label>
        </div>
        <div class="field">
            <input type="radio" name="typeAuto" value="2" id="europe">
            <label for="europe" class="radio">Иномарки Европа</label>
        </div>
        <div class="field">
            <input type="radio" name="typeAuto" value="3" id="asia">
            <label for="asia" class="radio">Иномарки Азия</label>
        </div>
        <div class="field">
            <input type="radio" name="typeAuto" value="4" id="usa">
            <label for="usa" class="radio">Иномарки США</label>
        </div>
        <div class="field">
            <input type="radio" name="typeAuto" value="5" id="allAuto">
            <label for="allAuto" class="radio">Все</label>
        </div>

    </div>
    <div class="left regForm">
        <div class="field">
            <label for="title">Название</label>
            <input type="text" name="title" id="title" placeholder="Пример: РегионМАЗ ООО"/>
        </div>
        <div class="field">
            <label for="city">Ваш город</label>
            <input type="text" name="city" id="city" placeholder="Пример: Москва"/>
        </div>
        <div class="field">
            <label for="address">Ваш адрес</label>
            <input type="text" name="address" id="address" placeholder="ул. Льва Толстого, 16"/>
        </div>
        <div class="field">
            <label for="tel">Ваш телефон</label>
            <input type="text" name="tel" id="tel" placeholder="(495)123-45-67"/>
        </div>
        <div class="field">
            <label for="email">Ваш e-mail</label>
            <input type="text" name="email" id="email" placeholder="vash@mail.ru"/>
        </div>
    </div>
    <div class="descBlock">
        <div class="field">
            <label for="description">Краткое описание</label>
            <textarea name="description" id="description" cols="80" rows="10" placeholder="Краткое описание с указанием марок автомобилей, наличия эвакуатора"></textarea>
        </div>
        <div class="field">
            <label for="text">Подробное описание</label>
            <textarea name="text" id="text" cols="80" rows="10" placeholder="Подробное описание"></textarea>
        </div>
    </div>
    <button>Зарегистрировать</button> <span class="notification"></span>
    </div>
</div>
{% include 'bottom.html' %}

<script>
    $('button').click(function(){
        title = $('#title').val();
        city = $('#city').val();
        address = $('#address').val();
        tel = $('#tel').val();
        email = $('#email').val();
        description = $('#description').val();
        text = $('#text').val();
        type = $('input[name=type]:checked').val();
        typeAuto = $('input[name=typeAuto]:checked').val();

        if (title == '' || city == '' || address == '' || tel == '' || email == '' || description == '' || text == '' || typeof type === "undefined" || typeof typeAuto === "undefined"){
            alert('Заполнены не все поля');
        }
        else if(!IsEmail(email)){
            alert('Неверный email');
        }
        else{
            $.ajax({
                type: "POST",
                url: location.href,
                data: {addObj: 1, title: title, city: city, address: address, tel: tel, email: email, description: description, text: text, type: type, typeAuto: typeAuto},
                success: function(e){
                    $('.notification').text(e);
                    //$('.block').text("Объект успешно добавлен!");
                }
            });
        }

    });
function IsEmail(email) {
    var regex = /^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;
        return regex.test(email);
}
</script>